<section class="cui-page__content">
    <cui-page-content-title text="'iplb_configuration_title' | translate"></cui-page-content-title>
    <p data-translate="iplb_configuration_intro"></p>

    <div
        class="text-center"
        data-ng-if="$ctrl.zones.loading">
        <oui-spinner></oui-spinner>
    </div>

    <oui-datagrid
        data-ng-if="!$ctrl.zones.loading"
        data-rows="$ctrl.zones.data"
        data-selectable-rows>
        <extra-top>
            <oui-button
                class="mb-3"
                data-variant="secondary"
                data-text="{{:: 'iplb_configuration_action_apply' | translate }}"
                data-on-click="$ctrl.applyChanges($selectedRows)"
                data-disabled="!$selectedRows.length"></oui-button>
        </extra-top>
        <oui-column
            data-title="'iplb_configuration_datacenter' | translate"
            data-property="name"
            data-sortable="asc"></oui-column>
        <oui-column
            data-title="'iplb_configuration_progress' | translate"
            data-sortable>
            <oui-progress
                data-compact
                data-ng-if="$row.task">
                <oui-progress-bar
                    data-type="{{:: $ctrl.ServiceHelper.constructor.getTaskProgressType($row.task.status) }}"
                    data-value="$row.task.progress"></oui-progress-bar>
            </oui-progress>
        </oui-column>
        <oui-column data-title="'iplb_configuration_status' | translate">
            <span
                data-ng-switch
                data-on="$row.changes">
                <span
                    data-ng-switch-when="0"
                    class="oui-status oui-status_success"
                    data-translate="iplb_configuration_changes_0"></span>
                <span
                    data-ng-switch-when="1"
                    class="oui-status oui-status_warning"
                    data-translate="iplb_configuration_changes_1"></span>
                <span
                    data-ng-switch-default
                    class="oui-status oui-status_warning"
                    data-translate="iplb_configuration_changes_count"
                    data-translate-values="{ count: $row.changes }"></span>
            </span>
        </oui-column>
        <oui-action-menu
            data-align="end"
            data-compact>
            <oui-action-menu-item
                data-text="{{:: 'iplb_configuration_action_apply' | translate}}"
                data-on-click="$ctrl.applyChanges($row.id)"></oui-action-menu-item>
        </oui-action-menu>
    </oui-datagrid>
</section>
