{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js??ref--10-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/helper/order-helper.service.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/helper/order-helper.service.js","mtime":1539717142187},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/.babelrc","mtime":1539717141926},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar OrderHelperService =\n/*#__PURE__*/\nfunction () {\n  OrderHelperService.$inject = [\"$httpParamSerializerJQLike\", \"$window\", \"OvhApiMe\"];\n\n  function OrderHelperService($httpParamSerializerJQLike, $window, OvhApiMe) {\n    _classCallCheck(this, OrderHelperService);\n\n    this.$httpParamSerializerJQLike = $httpParamSerializerJQLike;\n    this.$window = $window;\n    this.User = OvhApiMe;\n  }\n\n  _createClass(OrderHelperService, [{\n    key: \"openExpressOrderUrl\",\n    value: function openExpressOrderUrl(config) {\n      var _this = this;\n\n      var urlParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.getExpressOrderUrl(config, urlParams).then(function (href) {\n        _this.$window.location.href = href;\n      });\n    }\n  }, {\n    key: \"getUrlConfigPart\",\n    value: function getUrlConfigPart(config) {\n      var _this2 = this;\n\n      var urlParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var formattedConfig = config;\n\n      if (!_.isArray(config)) {\n        // Transform configuration and option value if necessary\n        formattedConfig = _.assign({}, config);\n\n        if (formattedConfig.configuration && !_.isArray(formattedConfig.configuration)) {\n          formattedConfig.configuration = this.constructor.transformToOrderValues(formattedConfig.configuration);\n        }\n\n        if (formattedConfig.option) {\n          var formattedOptions = formattedConfig.option.map(function (option) {\n            if (option.configuration && !_.isArray(option.configuration)) {\n              _.set(option, 'configuration', _this2.constructor.transformToOrderValues(option.configuration));\n            }\n\n            return option;\n          });\n          formattedConfig.option = formattedOptions;\n        }\n\n        formattedConfig = [formattedConfig];\n      }\n\n      return this.$httpParamSerializerJQLike(_.assign({}, urlParams, {\n        products: JSURL.stringify(formattedConfig)\n      }));\n    }\n    /**\n     * Transform an object to an Order compliant array\n     * @param  {Object} config plain json\n     * @return {Array} an array compatible with Order\n     */\n\n  }, {\n    key: \"getExpressOrderUrl\",\n    value: function getExpressOrderUrl(config) {\n      var urlParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var path = '/order/express/#/new/express/resume';\n      var paramsPart = this.getUrlConfigPart(config, urlParams);\n      return this.buildUrl(\"\".concat(path, \"?\").concat(paramsPart));\n    }\n  }, {\n    key: \"buildUrl\",\n    value: function buildUrl(path) {\n      // Maybe this could be put in configuration\n      return this.User.v6().get().$promise.then(function (user) {\n        var targetURL;\n\n        switch (user.ovhSubsidiary) {\n          case 'FR':\n            targetURL = 'https://www.ovh.com/fr';\n            break;\n\n          case 'CZ':\n            targetURL = 'https://www.ovh.cz';\n            break;\n\n          case 'DE':\n            targetURL = 'https://www.ovh.de';\n            break;\n\n          case 'ES':\n            targetURL = 'https://www.ovh.es';\n            break;\n\n          case 'FI':\n            targetURL = 'https://www.ovh-hosting.fi';\n            break;\n\n          case 'GB':\n            targetURL = 'https://www.ovh.co.uk';\n            break;\n\n          case 'IE':\n            targetURL = 'https://www.ovh.ie';\n            break;\n\n          case 'IT':\n            targetURL = 'https://www.ovh.it';\n            break;\n\n          case 'LT':\n            targetURL = 'https://www.ovh.lt';\n            break;\n\n          case 'MA':\n            targetURL = 'https://www.ovh.ma';\n            break;\n\n          case 'NL':\n            targetURL = 'https://www.ovh.nl';\n            break;\n\n          case 'PL':\n            targetURL = 'https://www.ovh.pl';\n            break;\n\n          case 'PT':\n            targetURL = 'https://www.ovh.pt';\n            break;\n\n          case 'SN':\n            targetURL = 'https://www.ovh.sn';\n            break;\n\n          case 'TN':\n            targetURL = 'https://www.ovh.com/tn';\n            break;\n\n          case 'ASIA':\n            targetURL = 'https://ca.ovh.com/asia';\n            break;\n\n          case 'AU':\n            targetURL = 'https://www.ovh.com.au';\n            break;\n\n          case 'CA':\n            targetURL = 'https://ca.ovh.com/en';\n            break;\n\n          case 'SG':\n            targetURL = 'https://ca.ovh.com/sg';\n            break;\n\n          case 'WS':\n            targetURL = 'https://us.ovh.com/es';\n            break;\n\n          case 'WE':\n            targetURL = 'https://ca.ovh.com/en';\n            break;\n\n          case 'QC':\n            targetURL = 'https://ca.ovh.com/fr';\n            break;\n\n          default:\n            targetURL = 'https://www.ovh.com/fr';\n        }\n\n        return \"\".concat(targetURL).concat(path);\n      });\n    }\n  }], [{\n    key: \"transformToOrderValues\",\n    value: function transformToOrderValues(config) {\n      var orderConfig = [];\n\n      _.forEach(_.keys(config), function (key) {\n        var configParam = {\n          label: key\n        };\n\n        if (_.isArray(config[key])) {\n          configParam.values = config[key];\n        } else {\n          configParam.values = [config[key]];\n        }\n\n        orderConfig.push(configParam);\n      });\n\n      return orderConfig;\n    }\n  }]);\n\n  return OrderHelperService;\n}();\n\nangular.module('managerApp').service('OrderHelperService', OrderHelperService);",null]}