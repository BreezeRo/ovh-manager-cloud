{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/deskaas/sidebar/deskaas-sidebar.service.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/deskaas/sidebar/deskaas-sidebar.service.js","mtime":1539717142184},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["angular.module('managerApp').service('deskaasSidebar', function ($rootScope, OvhApiDeskaasService, $q, SidebarMenu) {\n  const self = this;\n\n  /*= ===================================\n      =            SECTION LOAD            =\n      ==================================== */\n\n  /* ----------  API CALL  ----------*/\n\n  self.getServices = function () {\n    return $q((resolve) => {\n      OvhApiDeskaasService.v6().query()\n        .$promise\n        .then((serviceNames) => {\n          const requests = [];\n\n          angular.forEach(\n            serviceNames,\n            (serviceName) => {\n              requests\n                .push(\n                  OvhApiDeskaasService.v6()\n                    .get({ serviceName })\n                    .$promise\n                    .then(service => service, () => ({ serviceName, alias: '', error: true })),\n                );\n            },\n          );\n\n          $q.all(requests).then((elements) => {\n            resolve(elements);\n          });\n        })\n        .catch(() => {\n          resolve();\n        });\n    });\n  };\n\n  self.getEntryMenu = function (service) {\n    const id = `deskaas_${service.serviceName}`;\n    const title = service.alias === 'noAlias' || service.alias === '' ? service.serviceName : `${service.alias} (${service.serviceName})`;\n    return { id, title };\n  };\n\n  /* */\n  self.updateItem = function (service) {\n    const entry = self.getEntryMenu(service);\n    if (self.section) {\n      SidebarMenu.updateItemDisplay({\n        title: entry.title,\n      }, entry.id, self.section.id);\n    }\n  };\n\n  /* ----------  FILL  ----------*/\n\n  self.loadIntoSection = function (section, servicesParams) {\n    let services = servicesParams;\n    self.section = section;\n    services = services.sort();\n    // For each project, add an item\n    angular.forEach(services, (service) => {\n      if (!service.error) {\n        const entry = self.getEntryMenu(service);\n        SidebarMenu.addMenuItem({\n          id: entry.id,\n          title: entry.title,\n          // icon: \"dedicated-cloud2\",\n          state: 'deskaas.details',\n          stateParams: {\n            serviceName: service.serviceName,\n          },\n        }, section);\n      }\n    });\n  };\n\n  /* -----  End of SECTION LOAD  ------*/\n});\n"]}