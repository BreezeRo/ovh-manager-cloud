{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/home/home.controller.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/home/home.controller.js","mtime":1539717374550},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["class HomeCtrl {\n  constructor($q, $translate, DocsService, FeatureAvailabilityService, OvhApiMe) {\n    this.$q = $q;\n    this.$translate = $translate;\n\n    this.DocsService = DocsService;\n    this.FeatureAvailabilityService = FeatureAvailabilityService;\n    this.OvhApiMe = OvhApiMe;\n  }\n\n  $onInit() {\n    this.defaultSections = ['PROJECT', 'VPS'];\n    this.guides = {};\n    this.guides.all = this.DocsService.getAllGuidesLink();\n\n    this.buildSummitData();\n\n    return this.setSections();\n  }\n\n  setSections() {\n    const sectionsPromise = _.map(this.defaultSections, section => this.FeatureAvailabilityService.hasFeaturePromise(section, 'guides'));\n\n    return this.$q.all(sectionsPromise)\n      .then((sections) => {\n        this.guides.sections = _.chain(this.defaultSections)\n          .filter((value, index) => sections[index])\n          .map(section => this.DocsService.getGuidesOfSection(section))\n          .value();\n        return this.guides.sections;\n      });\n  }\n\n  buildSummitData() {\n    this.localeForSummitBanner = this.$translate.use().split('_')[0] === 'fr' ? 'fr' : 'en';\n\n    const subsidiariesWithSummitBanner = ['FR', 'GB', 'DE', 'ES'];\n    this.shouldDisplayBanner = false;\n\n    return this.OvhApiMe.v6()\n      .get().$promise\n      .then(({ ovhSubsidiary }) => {\n        this.shouldDisplayBanner = _(subsidiariesWithSummitBanner).includes(ovhSubsidiary);\n      });\n  }\n}\n\nangular.module('managerApp').controller('HomeCtrl', HomeCtrl);\n"]}