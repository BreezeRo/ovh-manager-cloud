{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/cda/cda.service.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/cda/cda.service.js","mtime":1539717141932},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["angular.module('managerApp')\n  .service('CdaService', function ($q, $translate, OvhApiDedicatedCeph, SidebarMenu, CloudMessage) {\n    const self = this;\n\n    self.currentService = {};\n\n    self.initDetails = function (serviceName, forceRefresh) {\n      if (!serviceName) {\n        self.currentService = {};\n        return $q.reject();\n      }\n\n      if (self.currentService.serviceName !== serviceName || forceRefresh === true) {\n        OvhApiDedicatedCeph.v6().resetQueryCache();\n        return OvhApiDedicatedCeph.v6().get({\n          serviceName,\n        }).$promise.then((cda) => {\n          self.currentService = cda;\n          return cda;\n        }).catch((error) => {\n          CloudMessage.error([$translate.instant('ceph_common_error'), (error.data && error.data.message) || ''].join(' '));\n        });\n      }\n      return $q.when(self.currentService);\n    };\n\n    self.updateDetails = function (serviceName, label, crushTunable) {\n      self.saving = true;\n      return OvhApiDedicatedCeph.v6().put({\n        serviceName,\n      }, {\n        serviceName,\n        crushTunables: crushTunable,\n        label,\n      }).$promise.then(() => {\n        self.initDetails(serviceName, true).then(() => {\n          self.changeMenuTitle(\n            serviceName,\n            self.currentService.label ? self.currentService.label : self.currentService.serviceName,\n          );\n        });\n      }).catch(error => $q.reject(error));\n    };\n\n    self.changeMenuTitle = function (serviceName, label) {\n      const menuItem = SidebarMenu.getItemById(serviceName);\n      if (menuItem) {\n        menuItem.title = label;\n      }\n    };\n\n    self.getUsers = function (params) {\n      OvhApiDedicatedCeph.User().Aapi().resetCache();\n\n      return OvhApiDedicatedCeph.User().Aapi().users({\n        serviceName: params.serviceName,\n      }).$promise.then(users => users);\n    };\n  });\n"]}