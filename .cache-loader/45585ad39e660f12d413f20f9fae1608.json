{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/cloud/project/compute/snapshot/cloud-project-compute-snapshot-price.service.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/cloud/project/compute/snapshot/cloud-project-compute-snapshot-price.service.js","mtime":1539717142032},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["class CloudProjectComputeSnapshotPriceService {\n  constructor(OvhCloudPriceHelper) {\n    this.OvhCloudPriceHelper = OvhCloudPriceHelper;\n  }\n\n    getSnapshotPrice = function getSnapshotPrice({ size, serviceName, region }) {\n      return this.OvhCloudPriceHelper.getPrices(serviceName).then((prices) => {\n        let snapshotPrice = prices[`snapshot.consumption.${region}`] || prices['snapshot.consumption'];\n        if (!snapshotPrice) {\n          console.warn('price not found for this snapshot');\n        }\n        snapshotPrice = {\n          price: angular.copy(snapshotPrice.price),\n          priceInUcents: snapshotPrice.priceInUcents,\n        };\n        snapshotPrice.totalPrice = angular.copy(snapshotPrice.price);\n        snapshotPrice.monthlyPrice = angular.copy(snapshotPrice.price);\n\n        snapshotPrice.monthlyPrice.value = snapshotPrice.priceInUcents * moment.duration(1, 'months').asHours() / 100000000;\n        snapshotPrice.monthlyPrice.text = snapshotPrice.monthlyPrice.text.replace(/\\d+(?:[.,]\\d+)?/, _.round(snapshotPrice.monthlyPrice.value.toString(), 2));\n\n        snapshotPrice.totalPrice.value = snapshotPrice.monthlyPrice.value * size;\n        snapshotPrice.totalPrice.text = snapshotPrice.totalPrice.text.replace(/\\d+(?:[.,]\\d+)?/, _.round(snapshotPrice.totalPrice.value.toString(), 2));\n\n        return snapshotPrice;\n      });\n    }\n}\n\nangular.module('managerApp').service('CloudProjectComputeSnapshotPriceService', CloudProjectComputeSnapshotPriceService);\n"]}