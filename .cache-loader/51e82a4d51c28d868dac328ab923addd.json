{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js??ref--10-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/iplb/serverFarm/probe/iplb-server-farm-probe.controller.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/iplb/serverFarm/probe/iplb-server-farm-probe.controller.js","mtime":1539717142217},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/.babelrc","mtime":1539717141926},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar IpLoadBalancerServerFarmProbeEditCtrl =\n/*#__PURE__*/\nfunction () {\n  IpLoadBalancerServerFarmProbeEditCtrl.$inject = [\"$uibModalInstance\", \"IpLoadBalancerConstant\", \"availableProbes\", \"edition\", \"farm\"];\n\n  function IpLoadBalancerServerFarmProbeEditCtrl($uibModalInstance, IpLoadBalancerConstant, availableProbes, edition, farm) {\n    _classCallCheck(this, IpLoadBalancerServerFarmProbeEditCtrl);\n\n    this.$uibModalInstance = $uibModalInstance;\n    this.IpLoadBalancerConstant = IpLoadBalancerConstant;\n    this.availableProbes = availableProbes;\n    this.edition = edition;\n    this.farm = farm;\n    this.farmProbe = this.farm.probe ? angular.copy(this.farm.probe) : {\n      match: 'default'\n    };\n    this.methods = IpLoadBalancerConstant.probeMethods;\n    this.matches = IpLoadBalancerConstant.probeMatches;\n    this.rules = this.getRules();\n\n    if (!_.includes(this.getMatches(), this.farm.probe.match)) {\n      this.farmProbe.match = null;\n      this.farmProbe.pattern = null;\n      this.farmProbe.negate = null;\n    }\n\n    if (!this.edition) {\n      this.farmProbe.port = this.farm.port;\n      this.farmProbe.interval = 30;\n\n      switch (this.farmProbe.type) {\n        case 'http':\n          this.farmProbe.method = 'GET';\n          this.farmProbe.url = '/';\n          break;\n\n        default:\n          break;\n      }\n\n      this.farmProbe.match = 'default';\n\n      if (this.farmProbe.type === 'oco') {\n        delete this.farmProbe.port;\n      }\n    } else if (this.farmProbe.negate === null) {\n      this.farmProbe.negate = false;\n    }\n  }\n\n  _createClass(IpLoadBalancerServerFarmProbeEditCtrl, [{\n    key: \"isFieldVisible\",\n    value: function isFieldVisible(field) {\n      if (field === 'pattern') {\n        return this.farmProbe.match !== 'default';\n      }\n\n      if (field === 'match' && _.isArray(this.rules.matches) && this.rules.matches.length === 1) {\n        return false;\n      }\n\n      return !Object.prototype.hasOwnProperty.call(this.rules, field) || !!this.rules[field];\n    }\n  }, {\n    key: \"getMatches\",\n    value: function getMatches() {\n      return this.rules.matches;\n    }\n  }, {\n    key: \"getRules\",\n    value: function getRules() {\n      return _.find(this.availableProbes, {\n        type: this.farmProbe.type\n      });\n    }\n  }, {\n    key: \"cleanProbe\",\n    value: function cleanProbe() {\n      if (this.farmProbe.match === 'default') {\n        this.farmProbe.pattern = null;\n      }\n\n      if (!this.farmProbe.negate) {\n        this.farmProbe.negate = null;\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.cleanProbe();\n      this.$uibModalInstance.close(this.farmProbe);\n    }\n  }, {\n    key: \"dismiss\",\n    value: function dismiss() {\n      this.$uibModalInstance.dismiss();\n    }\n  }]);\n\n  return IpLoadBalancerServerFarmProbeEditCtrl;\n}();\n\nangular.module('managerApp').controller('IpLoadBalancerServerFarmProbeEditCtrl', IpLoadBalancerServerFarmProbeEditCtrl);",null]}