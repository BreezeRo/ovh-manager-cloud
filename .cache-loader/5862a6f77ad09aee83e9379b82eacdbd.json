{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/components/sidebar/sidebar-products.service.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/components/sidebar/sidebar-products.service.js","mtime":1539717142429},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["class SidebarContentService {\n  constructor($translate, FeatureAvailabilityService, SidebarMenu, SidebarHelper, MANAGER_URLS,\n    IaasSectionSidebarService, PaasSectionSidebarService, MetricsSectionSidebarService,\n    LogsSectionSidebarService, VrackSectionSidebarService, LoadBalancerSectionSidebarService,\n    CloudDesktopSectionSidebarService, IpSectionSidebarService, LicenseSectionSidebarService) {\n    this.$translate = $translate;\n    this.FeatureAvailabilityService = FeatureAvailabilityService;\n    this.SidebarMenu = SidebarMenu;\n    this.SidebarHelper = SidebarHelper;\n    this.MANAGER_URLS = MANAGER_URLS;\n\n    // In order of appearance in the menu\n    this.sections = [\n      IaasSectionSidebarService,\n      PaasSectionSidebarService,\n      MetricsSectionSidebarService,\n      LogsSectionSidebarService,\n      LoadBalancerSectionSidebarService,\n      IpSectionSidebarService,\n      LicenseSectionSidebarService,\n      VrackSectionSidebarService,\n      CloudDesktopSectionSidebarService,\n    ];\n  }\n\n  buildSidebarContent(products, locale) {\n    const allProductsOfUser = this.transformProducts(products, this.sections);\n    return this.fillSidebarMenuItems(allProductsOfUser, this.sections, locale);\n  }\n\n  fillSidebarMenuItems(allProducts, sectionsProviders, locale) {\n    _.forEach(sectionsProviders, (section) => {\n      if (!this.SidebarHelper.sectionHasAvailableProduct(section, locale)) {\n        return;\n      }\n      if (this.SidebarHelper.constructor\n        .countProductsInSection(allProducts[section.sectionName]) <= 0) {\n        return;\n      }\n      section.createSection(allProducts[section.sectionName]);\n    });\n  }\n\n  transformProducts(allProducts, sectionsProviders) {\n    const productsRestructured = {};\n    _.forEach(sectionsProviders, (section) => {\n      const productsInSection = {};\n      _.forEach(section.productTypesInSection, (product) => {\n        const products = this.constructor.getProductsFromAPIStructure(product.type, allProducts);\n        _.extend(\n          productsInSection,\n          this.constructor.transformDataStructure(product.type, products),\n        );\n      });\n      _.extend(\n        productsRestructured,\n        this.constructor.transformDataStructure(section.sectionName, productsInSection),\n      );\n    });\n    return productsRestructured;\n  }\n\n  static getProductsFromAPIStructure(productType, allProducts) {\n    return _.get(_.find(allProducts, { name: productType }), 'services');\n  }\n\n  static transformDataStructure(sectionName, services) {\n    const object = {};\n    object[sectionName] = services;\n    return object;\n  }\n}\n\nangular.module('managerApp').service('SidebarContentService', SidebarContentService);\n"]}