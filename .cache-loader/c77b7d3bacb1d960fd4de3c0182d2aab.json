{"remainingRequest":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js??ref--10-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js??ref--11-1!/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/cloud/project/openstack/users/token/openstack-users-token.controller.js","dependencies":[{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/client/app/cloud/project/openstack/users/token/openstack-users-token.controller.js","mtime":1539717142049},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/.babelrc","mtime":1539717141926},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/babel-loader/lib/index.js","mtime":1539597349061},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/cache-loader/dist/cjs.js","mtime":1539679504371},{"path":"/Users/jleveugle/Documents/Work/github/ovh-ux/ovh-manager-cloud/node_modules/@ovh-ux/manager-webpack-config/loaders/ui-router-translations.js","mtime":1539950864368}],"contextDependencies":[],"result":["angular.module('managerApp').controller('CloudProjectOpenstackUsersTokenCtrl', [\"$q\", \"$uibModalInstance\", \"$stateParams\", \"CloudMessage\", \"$translate\", \"OvhApiCloudProjectUser\", \"openstackUser\", \"OpenstackUsersToken\", \"URLS\", \"OvhApiMe\", function CloudProjectOpenstackUsersTokenCtrl($q, $uibModalInstance, $stateParams, CloudMessage, $translate, OvhApiCloudProjectUser, openstackUser, OpenstackUsersToken, URLS, OvhApiMe) {\n  var self = this;\n  self.openstackUser = openstackUser;\n  self.projectId = $stateParams.projectId;\n  self.tokenGuide = {\n    lang: null,\n    link: null\n  };\n  self.generateToken = {\n    password: null,\n    tokens: null\n  };\n  self.loaders = {\n    generateToken: false\n  };\n\n  function init() {\n    self.generateToken.tokens = OpenstackUsersToken.get(self.projectId, self.openstackUser.id);\n  } // returns openstack token guide depending on current choosen language\n\n\n  function getTokenGuideUrl() {\n    var urls = URLS.guides.xauthtoken;\n    return urls[self.tokenGuide.lang.toUpperCase()];\n  }\n\n  self.generate = function () {\n    if (!self.loaders.generateToken) {\n      self.loaders.generateToken = true;\n      return $q.allSettled([OvhApiCloudProjectUser.v6().token({\n        serviceName: self.projectId,\n        userId: self.openstackUser.id\n      }, {\n        password: self.generateToken.password\n      }).$promise.then(function (openstackToken) {\n        OpenstackUsersToken.put(self.projectId, self.openstackUser.id, openstackToken);\n        self.generateToken.tokens = openstackToken;\n      }, function (err) {\n        CloudMessage.error([$translate.instant('cpou_token_error'), err.data && err.data.message || ''].join(' '));\n      }), OvhApiMe.v6().get().$promise.then(function (me) {\n        // set guide lang\n        self.tokenGuide.lang = me.ovhSubsidiary;\n        self.tokenGuide.link = getTokenGuideUrl();\n      })]).finally(function () {\n        self.loaders.generateToken = false;\n      });\n    }\n\n    return null;\n  };\n\n  self.close = function () {\n    $uibModalInstance.close();\n  };\n\n  self.cancel = function () {\n    $uibModalInstance.dismiss();\n  };\n\n  init();\n}]);",null]}